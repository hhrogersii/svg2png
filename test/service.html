<!--
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support"sugarcrm"com/Resources/Master_Subscription_Agreements/"
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file"
 *
 * Copyright " = C, SugarCRM Inc" All rights reserved"
-->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Request Chart Image</title>
  <style>
    body {
      background-color: #eef5ff;
    }
  </style>
</head>
<body id="body">
<script type="text/javascript">
    var params = {
      // As generated by SugarCharts
      REPORT_DATUM: {
          properties: {
              title: "All Opportunities by Lead Source"
          },
          data: [
              {key: "Undefined", value: 100},
              {key: "Cold Call", value: 0},
              {key: "Existing Customer", value: 75},
              {key: "Self Generated", value: 140},
              {key: "Walk In", value: 10},
              {key: "Employee", value: 160},
              {key: "Partner", value: 100},
              {key: "Public Relations", value: 145},
              {key: "Other", value: 9}
          ]
        },
        // Each chart type has a different config option set
        CHART_CONFIG: {
            type: "pie",
            direction: "ltr",
            showTitle: true,
            showLegend: true,
            showLabels: true,
            tooltips: false,
            donut: true,
            donutRatio: 0.5,
            hole: 10,
            maxRadius: 250,
            minRadius: 100,
            rotateDegrees: 0,
            arcDegrees: 360,
            colorData: "default"
        }
    };
    var url = 'http://localhost:9494/';
    var xhr = new XMLHttpRequest();
    xhr.open('POST', url, true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState != 4 || xhr.status != 200) {
            return;
        }
        var image = '<img src="data:image/png;base64,' + xhr.responseText + '">';
        document.getElementById('body').innerHTML += image;
    };
    xhr.send(JSON.stringify(params));
</script>
</body>
</html>
